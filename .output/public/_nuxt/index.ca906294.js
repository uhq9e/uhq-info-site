var d=Object.defineProperty;var a=(r,i,s)=>i in r?d(r,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[i]=s;var e=(r,i,s)=>(a(r,typeof i!="symbol"?i+"":i,s),s);function c(r){if(!r)return r;let i=r.getFullYear().toString(),s=(r.getMonth()+1).toString().padStart(2,"0"),n=r.getDate().toString().padStart(2,"0");return`${i}-${s}-${n}`}function f(r){const s=/^(https?:\/\/(?:[a-zA-Z0-9_-]+\.)*[a-zA-Z0-9_-]+\.\w+)\/*\S*/.exec(r);return s!==null?`${s[1]}/favicon.ico`:s}const t=class t{constructor(i,s,n,h){e(this,"groups",null);this.id=i,this.key=s,this.regex=n,this.color=h}withGroups(i){return this.groups=i,this}toDisplay(){if(!this.groups)return null;switch(this.id){case 0:return null;case 1:return`@${this.groups.user}/${this.groups.id}`;case 2:return`${this.groups.id}`;case 3:return`${this.groups.id}`;case 4:return`${this.groups.id}`;case 5:return`@${this.groups.user}/${this.groups.id}`;case 50:return`@${this.groups.user}/${this.groups.id}`;case 51:return`${this.groups.id}`;case 52:return`${this.groups.id}`;case 53:return`@${this.groups.user}/${this.groups.id}`}}};e(t,"Unknown",new t(0,"unknown",null,"#888")),e(t,"Twitter",new t(1,"twitter",[/^https?:\/\/(?:twitter|x)\.com\/(?<user>\w+)\/status\/(?<id>\d+)/],"#1af")),e(t,"Pixiv",new t(2,"pixiv",[/^https?:\/\/www\.pixiv\.net\/(?:en\/)*artworks\/(?<id>\d+)/,/^https?:\/\/www\.pixiv\.net\/member_illust\.php\?illust_id=(?<id>\d)+/],"#0096fa")),e(t,"Crepu",new t(3,"crepu",[/^https?:\/\/crepu\.net\/post\/(?<id>\d+)/],"#06b6d4")),e(t,"Discord",new t(4,"discord",[/^https?:\/\/discord\.com\/channels\/(?<server>\d+)\/(?<channel>\d+)\/(?<id>\d+)/],"#78d")),e(t,"Skeb",new t(5,"skeb",[/^https?:\/\/skeb\.jp\/@(?<user>\w+)\/works\/(?<id>\d+)/],"#28837f")),e(t,"Weibo",new t(50,"weibo",[/^https?:\/\/weibo\.com\/(?<user>\d+)\/(?<id>\w+)/],"#ff8200")),e(t,"Tieba",new t(51,"tieba",[/^https?:\/\/tieba\.baidu\.com\/p\/(?<id>\d+)/],"#18f")),e(t,"Bilibili",new t(52,"bilibili",[/^https?:\/\/www\.bilibili\.com\/opus\/(?<id>\d+)/,/^https?:\/\/t\.bilibili\.com\/(?<id>\d+)/],"f79")),e(t,"Lofter",new t(53,"lofter",[/^https?:\/\/(?<user>\w+)\.lofter\.com\/post\/(?<id>\w+_\w+)/],"#14c4bc")),e(t,"members",[t.Unknown,t.Twitter,t.Pixiv,t.Crepu,t.Discord,t.Skeb,t.Weibo,t.Tieba,t.Bilibili,t.Lofter]);let u=t;function g(r){for(const i of u.members)if(i.regex)for(const s of i.regex){const n=s.exec(r);if(n)return i.withGroups(n.groups)}return u.Unknown}function b(r){const s=/^https?:\/\/(?:[a-zA-Z0-9_-]+\.)*([a-zA-Z0-9_-]+)\.\w{2,6}\/?\S*/.exec(r);return s?s[1]:null}async function p(r){return(await $fetch.raw("/api/auth/validate_token",{method:"POST",body:r,ignoreResponseError:!0})).status===200}function m(r){return`${r} | 若千人的末路`}function w(r){return`${(r.order??1)>=0?"+":"-"}${r.field}`}function $(r){return r.map(i=>w(i)).join(",")}export{b as a,c as f,g as m,m as p,$ as s,f as u,p as v};
