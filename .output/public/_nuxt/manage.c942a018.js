import L from"./toast.esm.f4f4a740.js";import I from"./inputtext.esm.6f13cc8a.js";import h from"./button.esm.4cfb2234.js";import R from"./card.esm.30134a5d.js";import{g as v,m as z,h as E,o as r,j as y,w as u,k as P,c as _,R as U,u as o,l as j,s as w,a as d,t as A,_ as F,r as p,b as a,z as $,S as q,A as G,a8 as H,a9 as J,C as K,V as O,d as Q,aa as W}from"./entry.e65a8b12.js";import X from"./menu.esm.3cff1f8b.js";import Y from"./sidebar.esm.5237a6fb.js";import{u as Z}from"./index.5ff72cb1.js";import{v as b,p as ee}from"./index.ca906294.js";import"./portal.esm.aa40dffd.js";import"./index.esm.4b125a15.js";import"./baseicon.esm.727e0a4e.js";import"./index.esm.20c9b6e4.js";import"./index.esm.42b2c471.js";import"./index.esm.6f348039.js";import"./badge.esm.63629650.js";import"./index.esm.2a477ad8.js";import"./overlayeventbus.esm.5f1005ca.js";import"./vue.f36acd1f.bcc699b4.js";const te=["href"],se={class:"ml-2"},oe=v({__name:"NavigateMenu",props:{items:{}},setup(g){const l=z();return(s,m)=>{const t=X,n=E("ripple");return r(),y(t,{model:s.items},{item:u(({item:e,props:i})=>[P((r(),_("a",U({class:["flex align-items:center bg:transparent",{"item-actived":o(l).path===e.url}],href:e.url},i.action),[e.icon?(r(),_("span",{key:0,class:j(e.icon)},null,2)):w("",!0),d("span",se,A(e.label),1)],16,te)),[[n]])]),_:1},8,["model"])}}});const ae=F(oe,[["__scopeId","data-v-0eb24de1"]]),ne={class:"flex flex:column h:calc(100vh-5.5rem)"},le={class:"flex flex:row flex-grow:1 w:full"},ie={class:"flex-grow:1 b:1 b:solid b:var(--surface-border) r:6 overflow:hidden"},re=v({__name:"ManageLayout",setup(g){const l=p([{label:"图片管理",url:"/manage/images"},{label:"作者管理",url:"/manage/authors"}]),s=p(!1);return(m,t)=>{const n=ae,e=Y,i=h;return r(),_("div",ne,[a(e,{visible:o(s),"onUpdate:visible":t[0]||(t[0]=c=>$(s)?s.value=c:null),pt:{content:{class:"px:0"}}},{default:u(()=>[a(n,{items:o(l),class:"w:full border:0"},null,8,["items"])]),_:1},8,["visible"]),a(i,{onClick:t[1]||(t[1]=c=>s.value=!o(s)),label:"导航",icon:"pi pi-bars",class:"mb:8 hidden@xs",text:""}),d("div",le,[a(n,{class:"hidden@<xs mr:8",items:o(l)},null,8,["items"]),d("div",ie,[q(m.$slots,"default")])])])}}}),ce={key:0},ue={key:0,class:"flex flex:col align-items:center"},me={class:"flex flex:col gap:8"},pe=d("label",{for:"token",class:"f:bold"},"Token",-1),k="网站内容管理面板",f=3e3,Le=v({__name:"manage",setup(g){const l=ee("管理");Z({title:l,ogTitle:l,description:k,ogDescription:k});const{t:s}=G(),m=H("token-validated",()=>!1),t=J("manage-token",{token:null}),n=K(),e=p(""),i=p(!1),c=p(!1);O(async()=>{m.value&&(c.value=!0),t.value.token&&(await b(t.value.token)?m.value=!0:(t.value.token=null,n.add({severity:"warn",summary:s("messages.sessionExpired"),life:f}))),c.value=!0});async function V(){i.value=!0,await b(e.value)?(n.add({severity:"success",summary:s("messages.validationSuccess"),life:f}),t.value={token:e.value}):n.add({severity:"error",summary:s("messages.wrongToken"),life:f}),i.value=!1}return(_e,x)=>{const T=L,S=I,C=h,M=R,N=W,B=re;return o(c)?(r(),_("div",ce,[a(T),o(t).token===null?(r(),_("div",ue,[a(M,{class:"w:20rem max-w:full"},{title:u(()=>[Q("需要认证")]),content:u(()=>[d("div",me,[pe,a(S,{id:"token",type:"password",modelValue:o(e),"onUpdate:modelValue":x[0]||(x[0]=D=>$(e)?e.value=D:null),class:"w:full"},null,8,["modelValue"])])]),footer:u(()=>[a(C,{onClick:V,label:"验证",loading:o(i),disabled:!o(e).length},null,8,["loading","disabled"])]),_:1})])):(r(),y(B,{key:1},{default:u(()=>[a(N)]),_:1}))])):w("",!0)}}});export{Le as default};
